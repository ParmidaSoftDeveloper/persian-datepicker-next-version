<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>zerounip</title>
  <link rel="stylesheet" href="zerounip.css">
  <script type="text/javascript" src="./zerounip-iife.js" ></script>
  <script type="text/javascript" src="http://babakhani.github.io/PersianWebToolkit/doc/lib/persian-date/dist/persian-date.js" ></script>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
  <style>
    html {
      font-family: 'Open Sans', sans-serif;
    }
    
    #containerAlt,
    #container {
      border: 2px solid #000;
      height: 32px;
      width: 300px;
      margin: 20px;
    }
  </style>
</head>
<body>
  <!--<center>-->
    <!--<img width="180" style="padding-top: 4em;" src="https://i.pinimg.com/originals/63/d0/8d/63d08d548b8215a571ff61f56e4f47c0.jpg" />-->
    <!--<h1> Pure javascript usage example </h1>-->
  <!--</center>-->
  <input id="container" />
  <input id="containerAlt" />
  <script>
    var container = document.getElementById('container')
    var options = {
      calendarType: 'persian', // DONE
      calendar: {
        persian: {
          locale: 'fa', // DONE
          showHint: true, // DONE
          leapYearMode: 'algorithmic' // "astronomical" // DONE
        },
        gregorian: {
          locale: 'en', // DONE
          showHint: true  // DONE
        }
      },
      responsive: true, // Deprecated
      inline: false, // Deprected
      initialValue: false,  // DONE
      initialValueType: 'persian', // Works but deprecated in next version
      persianDigit: true, // Deprected
      viewMode: 'date', // DONE
      format: 'LLLL', // DONE
      formatter (unixDate, dateObject) {
        return new dateObject(unixDate).format(this.format);
      }, // DONE
      altField: '#containerAlt',  // DONE
      altFormat: 'g', // DONE
      altFieldFormatter: function (unixDate, dateObject) {
        //console.log('user config alt formmater funciton')
        if (this.altFormat === 'gregorian' || this.altFormat === 'g') {
          return new Date(unixDate)
        }
        else if (this.altFormat === 'unix' || this.altFormat === 'u') {
          return new dateObject(unixDate).valueOf();
        } else {
          return new dateObject(unixDate).format(this.altFormat);
        }
      }, // DONE
      minDate: new persianDate().subtract('year', 16).valueOf(), // DONE
      maxDate: new persianDate().add('year', 6).valueOf(), // DONE,
      navigator: {
        'enabled': true,
        'scroll': {
          'enabled': true
        },
        'text': {
          'btnNextText': '<', // Deprecated
          'btnPrevText': '>' // Deprected
        },
        'onNext': function (datepickerObject) { // DONE
          console.log('navigator.onNext')
          console.log(datepickerObject)
        },
        'onPrev': function (datepickerObject) { // DONE
          console.log('navigator.onPrev')
          console.log(datepickerObject)
        },
        'onSwitch': function (datepickerObject) { // DONE
          console.log('navigator.onSwitch')
          //console.log(datepickerObject)
        }
      },
      toolbox: {
        enabled: true,
          text: { // DEPRECTED
            btnToday: 'امروز'
          },
          submitButton: {
            enabled: true, // DONE
            text: { // DEPRECTED
              fa: 'تایید',
                en: 'submit'
            },
            onSubmit: function (datepickerObject) { // DONE
              console.log('toolbox.onSubmit')
            }
          },
          todayButton: {
            enabled: true, // DONE
            text: { // DEPRECTED
              fa: 'امروز',
              en: 'today'
            },
            onToday: function (datepickerObject) { // DONE
              console.log('toolbox.onToday')
            }
          },
          calendarSwitch: {
            enabled: true, // DONE
            format: 'MMMM', // DEPRECATED
            onSwitch: function (datepickerObject) { // DONE
              console.log('toolbox.onSwitch')
            }
          }
      },
      onlyTimePicker: false, // DONE
      onlySelectOnDate: true,
      checkDate: function (unix) { // DONE
        return true 
      },
      checkMonth: function (y, m) { // DONE
        return true;
      },
      checkYear: function (y) { // DONE
        return true;
      },
      'timePicker': {
        'enabled': true,
        'step': 1,
        'hour': {
          'enabled': true,
          'step': null
        },
        'minute': {
          'enabled': true,
          'step': null
        },
        'second': {
          'enabled': true,
          'step': null
        },
        'meridian': {
          'enabled': false
        }
      },
      dayPicker: {
        'enabled': true,
        'titleFormat': 'YYYY MMMM',
        'titleFormatter': function (year, month) {
        let titleDate = this.model.PersianDate.date([year, month]);
        return titleDate.format(this.model.options.dayPicker.titleFormat);
        },
          'onSelect': function (selectedDayUnix) {
        Helper.debug(this, 'dayPicker Event: onSelect : ' + selectedDayUnix);
          }
      },
      monthPicker: {
        'enabled': true,
        'titleFormat': 'YYYY',
        'titleFormatter': function (unix) {
        let titleDate = this.model.PersianDate.date(unix);
        return titleDate.format(this.model.options.monthPicker.titleFormat);
        },
          'onSelect': function (monthIndex) {
        Helper.debug(this, 'monthPicker Event: onSelect : ' + monthIndex);
        }
      },
      yearPicker: {
        'enabled': true,
        'titleFormat': 'YYYY',
        'titleFormatter': function (year) {
          let remaining = parseInt(year / 12, 10) * 12;
          let startYear = this.model.PersianDate.date([remaining]);
          let endYear = this.model.PersianDate.date([remaining + 11]);
          return startYear.format(this.model.options.yearPicker.titleFormat) + '-' + endYear.format(this.model.options.yearPicker.titleFormat);
        },
        onSelect: function (year) {
          Helper.debug(this, 'yearPicker Event: onSelect : ' + year);
        }
      },
      infobox : {
         enabled: true
      },
      onSelect: function (unixDate) {
        Helper.debug(this, 'datepicker Event: onSelect : ' + unixDate);
      },
      'onSet': function (unixDate) {
      Helper.debug(this, 'datepicker Event: onSet : ' + unixDate);
        },
      'position': 'auto',
      'onShow': function (datepickerObject) {
      Helper.debug(datepickerObject, 'Event: onShow ');
      },
      'onHide': function (datepickerObject) {
      Helper.debug(datepickerObject, 'Event: onHide ');
      },
      'onToggle': function (datepickerObject) {
      Helper.debug(datepickerObject, 'Event: onToggle ');
      },
      'onDestroy': function (datepickerObject) {
      Helper.debug(datepickerObject, 'Event: onDestroy ');
      },
      'autoClose': false,
      'template': null,
      'observer': false,
      'inputDelay': 800
    }
    zerounip(container, options)
  </script>
</body>
</html>
